!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}({3:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"<size>",n=100*window.devicePixelRatio,r=[100,200,300],o=r.findIndex((function(e){return e<n}));return o=-1===o?r.length-1:o+1,e.replace(t,r[o])}function o(e){return e*V}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Phaser.Scene),n=t,(i=[{key:"init",value:function(e){this.game.scale.scaleMode=Phaser.Scale.ScaleModes.FIT,this.game.scale.autoCenter=Phaser.Scale.Center.CENTER_BOTH}},{key:"preload",value:function(){this.load.image("kbp_bg",r("assets/birthday2019/kbp/kbp@<size>x.png")),this.load.image("df_bg",r("assets/birthday2019/dutyFree/df@<size>x.png")),this.load.image("home_bg",r("assets/birthday2019/home/home@<size>x.png")),this.load.image("road",r("assets/birthday2019/road/road@<size>x.png")),this.load.image("car",r("assets/birthday2019/car/car@<size>x.png")),this.load.image("billboard",r("assets/birthday2019/billboard/billboard@<size>x.png")),this.load.spritesheet("shapes",r("assets/birthday2019/players/shapes@<size>x.png"),{frameWidth:o(32),frameHeight:o(32),margin:0,spacing:0})}},{key:"create",value:function(){this.game.scene.start(J)}}])&&a(n.prototype,i),u&&a(n,u),t}();class h extends Phaser.GameObjects.Zone{constructor(e,t,n,r,o){super(e,t,n,r,o),this.scene=e,this.setOrigin(0),e.physics.add.existing(this),e.add.existing(this),this.body.setEnable(!0),this.body.setImmovable(!0)}collideWith(e,t){this.scene.physics.add.collider(e,this,t,null,this.scene)}putTextInside(e,t){let n=this.scene.add.text(this.x+.5*this.width,this.y+.5*this.height,e,t);n.setAlign("center"),n.setOrigin(.5)}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,n,r,o,i){var a,s,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,(a=!(c=p(t).call(this,e,n,r,o,i.frame))||"object"!==f(c)&&"function"!=typeof c?d(s):c).scene.add.existing(d(a)),a.scene.physics.add.existing(d(a)),a.body.setCollideWorldBounds(!0),a.cursors=e.input.keyboard.createCursorKeys(),a.meta=i,a.meta.tint&&a.dressUp(a.meta.tint),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,Phaser.GameObjects.Sprite),n=t,(r=[{key:"dressUp",value:function(e){this.tint=e,this.meta.tint=e}},{key:"currentDress",value:function(){return this.meta.tint}},{key:"onUpdate",value:function(){this.body.setVelocity(o(0)),this.cursors.left.isDown?this.body.setVelocityX(o(-120)):this.cursors.right.isDown&&this.body.setVelocityX(o(120)),this.cursors.up.isDown?this.body.setVelocityY(o(-120)):this.cursors.down.isDown&&this.body.setVelocityY(o(120)),this.body.velocity.lengthSq()>0&&this.setRotation(this.body.velocity.angle()+Phaser.Math.TAU)}}])&&y(n.prototype,r),i&&y(n,i),t}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.bound=n,this.changePhrases(r,o,i),this.conversationLastUpdated=0,this.conversation=null,this.call=null}var t,n,r;return t=e,(n=[{key:"changePhrases",value:function(e,t,n){this.startPhrases=e,this.latePhrases=t,this.rarePhrases=n}},{key:"hit",value:function(e,t){var n=this;e=e||null;var r={fontFamily:"Arial",fontSize:o(16),fill:"#000000"},i=t||r;if(this.call&&(this.call.remove(),this.call=this.scene.time.delayedCall(7e3,(function(){n.conversation.destroy(),n.conversation=null,n.call=null}))),null!==this.conversation&&(this.conversationLastUpdated<this.scene.time.now-1e3||null!==e)&&(null!==e?this.conversation.text=e:Phaser.Math.RND.frac()>.1?this.conversation.text="“".concat(Phaser.Math.RND.pick(this.latePhrases),"”"):this.conversation.text="“".concat(Phaser.Math.RND.pick(this.rarePhrases),"”"),this.conversation.setStyle(i),this.conversation.x=this.bound.x-.5*this.conversation.width+.5*this.bound.width,this.conversation.y=this.bound.y-o(10)-this.conversation.height,this.conversationLastUpdated=this.scene.time.now),null===this.conversation){this.conversationLastUpdated=this.scene.time.now;var a=e||"“".concat(Phaser.Math.RND.pick(this.startPhrases),"”");this.conversation=this.scene.add.text(0,0,a,i),this.conversation.x=this.bound.x-.5*this.conversation.width+.5*this.bound.width,this.conversation.y=this.bound.y-o(10)-this.conversation.height,this.call=this.scene.time.delayedCall(5e3,(function(){n.conversation.destroy(),n.conversation=null,n.call=null}))}}}])&&g(t.prototype,n),r&&g(t,r),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e,n,r,i,a,s,c,l){var u,h,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h=this,(u=!(f=P(t).call(this,e,n,r))||"object"!==w(f)&&"function"!=typeof f?x(h):f).onCollideWithPlayer=l,s=s||!1,u.scene.add.existing(x(u)),u.scene.physics.add.existing(x(u));var y=u.scene.add.image(0,0,"shapes",Phaser.Math.RND.between(0,4));if(y.x=.5*y.width,y.y=.5*y.height,y.setRotation(Phaser.Math.RND.rotation()),y.tint=i,u.add(y),s||Phaser.Math.RND.frac()>.5){var p=Phaser.Math.RND.pick(a),d=u.scene.add.text(0,0,p.ch,{fontFamily:"Arial",fontSize:o(20),fill:"#ff0000"});switch(p.vAlign){case"center":d.y=.5*y.height-.5*d.height;break;case"btm":d.y=y.height-d.height;break;case"top":d.y=0;break;default:throw"Unsupported vAlign"}switch(p.hAlign){case"center":d.x=.5*y.width-.5*d.width;break;case"right":d.x=y.width-d.width;break;case"left":d.x=0;break;default:throw"Unsupported hAlign"}u.add(d)}u.body.setSize(y.width,y.height),u.body.setEnable(!0),u.body.setImmovable(!0);var b=y.rotation;return u.scene.tweens.add({targets:y,delay:Phaser.Math.RND.between(1e3,4e3),duration:400,ease:Phaser.Math.Easing.Cubic.In,repeat:-1,repeatDelay:function(){return Phaser.Math.RND.between(1e3,4e3)},props:{rotation:{value:{getStart:function(e,t,n,r,o,i){return b},getEnd:function(e,t,n,r,o,i){return b=n+.25*-Phaser.Math.TAU+Phaser.Math.RND.frac()*(.5*Phaser.Math.TAU)}}}}}),u.conversation=new m(u.scene,u.getBounds(),c.start,c.late,c.rare),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,Phaser.GameObjects.Container),t}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=[{ch:"🍺",vAlign:"center",hAlign:"right"},{ch:"🍺",vAlign:"center",hAlign:"left"},{ch:"🍷",vAlign:"center",hAlign:"right"},{ch:"🍷",vAlign:"center",hAlign:"left"},{ch:"🍸",vAlign:"center",hAlign:"right"},{ch:"🍸",vAlign:"center",hAlign:"left"},{ch:"🥃",vAlign:"center",hAlign:"right"},{ch:"🥃",vAlign:"center",hAlign:"left"},{ch:"☕️",vAlign:"center",hAlign:"right"},{ch:"☕️",vAlign:"center",hAlign:"left"},{ch:"🍕️",vAlign:"center",hAlign:"right"},{ch:"🍕️",vAlign:"center",hAlign:"left"},{ch:"🍹",vAlign:"center",hAlign:"right"},{ch:"🍹",vAlign:"center",hAlign:"left"}],k=["Hey!","Howdy?","Hello","Hi","What's up?"],A=["Fancy beer?","Fancy cocktail?","Fancy wine?","Fancy pizza?"],E=["We're no strangers to love\nYou know the rules and so do I"],M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){return new _(this.scene,e,t,Phaser.Math.RND.pick([16007990,15277667,10233776,2201331,48340,5025616,16771899,16761095]),j,!1,{start:k,late:A,rare:E},(function(e,t){e.conversation.hit()}))}}])&&S(t.prototype,n),r&&S(t,r),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){this.scene=e,e.add.image(0,0,"home_bg").setOrigin(0),this.player=new v(e,o(.5*Y),o(.9*X),"shapes",t.playerMeta);var n=new h(e,o(256),o(224),o(256),o(128));n.putTextInside("🍷🍕🍺🥃",{fontFamily:"Arial",fontSize:o(24),fill:"#000000"}),n.collideWith(this.player,(function(e,t){console.log("Collided player: ".concat(e," with table zone: ").concat(t))})),this._addPeople(),e.physics.world.bounds.width=q,e.physics.world.bounds.height=K,e.cameras.main.setBounds(0,0,q,K),e.cameras.main.startFollow(this.player),e.cameras.main.roundPixels=!0}},{key:"update",value:function(e,t,n){this.player.onUpdate()}},{key:"_addPeople",value:function(){var e=this,t=[{x:.78*q,y:.4*K},{x:.78*q-o(42),y:.4*K-o(32)},{x:.78*q-o(68),y:.4*K+o(2)},{x:.78*q-o(28),y:.4*K+o(44)},{x:.56*q,y:.3*K},{x:.56*q-o(36),y:.3*K+o(8)},{x:.64*q,y:.22*K},{x:.64*q+o(40),y:.22*K-o(16)},{x:.64*q-o(4),y:.22*K-o(42)},{x:.38*q,y:.31*K},{x:.38*q+o(42),y:.31*K-o(12)},{x:.38*q-o(6),y:.31*K-o(40)},{x:.4*q,y:.64*K},{x:.4*q+o(36),y:.64*K+o(2)},{x:.24*q,y:.42*K},{x:.24*q-o(40),y:.42*K-o(32)},{x:.24*q-o(54),y:.42*K+o(20)},{x:.24*q-o(18),y:.42*K+o(48)},{x:.58*q,y:.68*K},{x:.22*q,y:.71*K},{x:.22*q+o(2),y:.71*K+o(60)},{x:.22*q+o(58),y:.71*K+o(4)},{x:.22*q+o(58),y:.71*K+o(54)}],n=new M(this.scene);t.forEach((function(t){var r=n.create(t.x,t.y);e.scene.physics.add.collider(e.player,r,(function(){r.onCollideWithPlayer(r,e.player)}))}))}}])&&T(t.prototype,n),r&&T(t,r),e}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,F(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,Phaser.Scene),n=t,(r=[{key:"init",value:function(e){}},{key:"preload",value:function(){}},{key:"create",value:function(){this.game.scene.start(Q,{behavior:new C,data:{playerMeta:{frame:Phaser.Math.RND.between(0,4),tint:$.defaultColor}}})}}])&&D(n.prototype,r),o&&D(n,o),t}();function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,B(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,Phaser.Scene),n=t,(r=[{key:"init",value:function(e){this.data=e.data,this.behavior=e.behavior}},{key:"preload",value:function(){}},{key:"create",value:function(){this.cameras.main.setBackgroundColor("#FFFFFF"),this.cameras.main.fadeIn(1e3),this.behavior.create&&this.behavior.create(this,this.data)}},{key:"update",value:function(e,t){this.behavior.update&&this.behavior.update(this,e,t)}}])&&W(n.prototype,r),o&&W(n,o),t}(),V=window.devicePixelRatio,Y=768,X=576,q=Y*V,K=X*V;console.log("Game size: ".concat(q,"/").concat(K));var Z="boot",J="menu",Q="world",$={defaultColor:10395294},ee={type:Phaser.AUTO,parent:"game",scale:{mode:Phaser.Scale.NONE,width:q,height:K,zoom:1/V},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!0}}};window.addEventListener("load",(function(){var e;(e=new Phaser.Game(ee)).scene.add(Z,new u(null)),e.scene.add(J,new U(null)),e.scene.add(Q,new L(null)),e.scene.start(Z)}))}});
//# sourceMappingURL=birthday2019.bundle.js.map