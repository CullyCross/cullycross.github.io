{"map":"{\"version\":3,\"sources\":[\"birthday2019.bundle.js\"],\"names\":[\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"3\",\"Error\",\"6\",\"__webpack_exports__\",\"BootScene\",\"init\",\"this\",\"game\",\"scale\",\"scaleMode\",\"Phaser\",\"ScaleManager\",\"SHOW_ALL\",\"pageAlignHorizontally\",\"pageAlignVertically\",\"load\",\"CustomLoader\",\"preload\",\"image\",\"state\",\"start\",\"PreloaderScene\",\"_this\",\"loadingBar\",\"add\",\"sprite\",\"anchor\",\"setTo\",\"setPreloadSprite\",\"webfont\",\"forEach\",\"x\",\"tilemap\",\"concat\",\"Tilemap\",\"TILED_JSON\",\"spritesheet\",\"audio\",\"TitleScene\",\"data\",\"keys\",\"input\",\"keyboard\",\"addKeys\",\"space\",\"KeyCode\",\"SPACEBAR\",\"titleMsg\",\"isVictory\",\"isGameOver\",\"help\",\"text\",\"width\",\"height\",\"font\",\"fill\",\"setShadow\",\"title\",\"y\",\"tween\",\"to\",\"Easing\",\"Sinusoidal\",\"InOut\",\"onUp\",\"addOnce\",\"mapKey\",\"character\",\"col\",\"row\",\"wearing\",\"isFirstTime\",\"pickedUp\",\"_typeof\",\"obj\",\"iterator\",\"constructor\",\"_possibleConstructorReturn\",\"self\",\"ReferenceError\",\"_assertThisInitialized\",\"_getPrototypeOf\",\"setPrototypeOf\",\"getPrototypeOf\",\"__proto__\",\"_setPrototypeOf\",\"Status\",\"_Phaser$Group\",\"instance\",\"Constructor\",\"TypeError\",\"_classCallCheck\",\"position\",\"make\",\"lifebar\",\"LifeBar\",\"health\",\"txt\",\"set\",\"subClass\",\"superClass\",\"writable\",\"configurable\",\"_inherits\",\"Group\",\"logger_typeof\",\"_defineProperties\",\"target\",\"props\",\"length\",\"descriptor\",\"logger_possibleConstructorReturn\",\"logger_assertThisInitialized\",\"logger_getPrototypeOf\",\"logger_setPrototypeOf\",\"MESSAGE_COUNT\",\"STYLE\",\"LINE_HEIGHT\",\"Logger\",\"logger_classCallCheck\",\"messages\",\"messageLabels\",\"label\",\"alpha\",\"push\",\"protoProps\",\"staticProps\",\"logger_inherits\",\"message\",\"console\",\"log\",\"unshift\",\"pop\",\"_updateLabels\",\"_this2\",\"setText\",\"gameMap\",\"PlayScene\",\"initialState\",\"up\",\"UP\",\"down\",\"DOWN\",\"left\",\"LEFT\",\"right\",\"RIGHT\",\"wait\",\"_loop\",\"onDown\",\"isTurnReady\",\"_moveCharacter\",\"sfx\",\"walk\",\"hit\",\"chest\",\"gameover\",\"song\",\"volume\",\"isDecoded\",\"isPlaying\",\"loopFull\",\"onDecoded\",\"map\",\"items\",\"group\",\"spawnItems\",\"open\",\"enemies\",\"spawnEnemies\",\"chara\",\"Character\",\"events\",\"onKilled\",\"visible\",\"play\",\"In\",\"onComplete\",\"tweens\",\"remove\",\"stop\",\"existing\",\"_checkForExits\",\"statusBar\",\"world\",\"logger\",\"onHit\",\"setValue\",\"_nextTurn\",\"promises\",\"enemy\",\"act\",\"Promise\",\"all\",\"then\",\"err\",\"direction\",\"_this3\",\"offsetCol\",\"offsetRow\",\"otherObject\",\"_getObjectAt\",\"isEnemy\",\"attack\",\"cols\",\"rows\",\"isChest\",\"content\",\"canWear\",\"wear\",\"id\",\"isThrone\",\"hasFullRegalia\",\"kill\",\"canMoveCharacter\",\"move\",\"_this4\",\"Map\",\"COLS\",\"ROWS\",\"exit\",\"restart\",\"filter\",\"isWearing\",\"getExit\",\"found\",\"forEachAlive\",\"item\",\"getObjectAt\",\"BIRTHDAY_2019_CONFIG\",\"type\",\"AUTO\",\"parent\",\"scene\",\"window\",\"addEventListener\",\"birthday2019\",\"Game\"],\"mappings\":\"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\"}","code":"!function(e){var t={};function s(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=6)}({3:function(e,t){throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/src/birthday2019/engine/gameMap.js: Support for the experimental syntax 'classProperties' isn't currently enabled (6:18):\\n\\n\u001b[0m \u001b[90m 4 | \u001b[39m\u001b[36mexport\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mGameMap\u001b[39m {\u001b[0m\\n\u001b[0m \u001b[90m 5 | \u001b[39m\u001b[0m\\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 | \u001b[39m    static \u001b[33mTSIZE\u001b[39m \u001b[33m=\u001b[39m \u001b[35m48\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m   | \u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m 7 | \u001b[39m    static \u001b[33mCOLS\u001b[39m \u001b[33m=\u001b[39m \u001b[35m16\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m 8 | \u001b[39m    static \u001b[33mROWS\u001b[39m \u001b[33m=\u001b[39m \u001b[35m12\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m 9 | \u001b[39m\u001b[0m\\n\\nAdd @babel/plugin-proposal-class-properties (https://git.io/vb4SL) to the 'plugins' section of your Babel config to enable transformation.\\n    at Parser.raise (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:6420:17)\\n    at Parser.expectPlugin (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:7778:18)\\n    at Parser.parseClassProperty (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:11013:12)\\n    at Parser.pushClassProperty (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10978:30)\\n    at Parser.parseClassMemberWithIsStatic (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10917:14)\\n    at Parser.parseClassMember (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10851:10)\\n    at withTopicForbiddingContext (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10806:14)\\n    at Parser.withTopicForbiddingContext (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:9884:14)\\n    at Parser.parseClassBody (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10783:10)\\n    at Parser.parseClass (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10757:22)\\n    at Parser.parseStatementContent (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10051:21)\\n    at Parser.parseStatement (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10009:17)\\n    at Parser.parseExportDeclaration (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:11194:17)\\n    at Parser.maybeParseExportDeclaration (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:11150:31)\\n    at Parser.parseExport (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:11079:29)\\n    at Parser.parseStatementContent (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10113:27)\\n    at Parser.parseStatement (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10009:17)\\n    at Parser.parseBlockOrModuleBlockBody (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10585:25)\\n    at Parser.parseBlockBody (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:10572:10)\\n    at Parser.parseTopLevel (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:9940:10)\\n    at Parser.parse (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:11447:17)\\n    at parse (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/parser/lib/index.js:11483:38)\\n    at parser (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/core/lib/transformation/normalize-file.js:168:34)\\n    at normalizeFile (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/core/lib/transformation/normalize-file.js:102:11)\\n    at runSync (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/core/lib/transformation/index.js:44:43)\\n    at runAsync (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/core/lib/transformation/index.js:35:14)\\n    at process.nextTick (/Users/tonyshkurenko/Development/Web/Projects/Personal/tonyshkurenko.github.io/node_modules/@babel/core/lib/transform.js:34:34)\\n    at processTicksAndRejections (internal/process/next_tick.js:74:9)\")},6:function(e,t,s){\"use strict\";s.r(t);var o={init:function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.load=new CustomLoader(this.game)},preload:function(){this.game.load.image(\"preloader_bar\",\"images/preloader_bar.png\")},create:function(){this.game.state.start(\"preloader\")}},a={preload:function(){var e=this;this.loadingBar=this.game.add.sprite(0,240,\"preloader_bar\"),this.loadingBar.anchor.setTo(0,.5),this.load.setPreloadSprite(this.loadingBar),this.game.load.webfont(\"gamja\",\"Patrick Hand\"),[\"00\",\"01\",\"02\"].forEach((function(t){e.game.load.tilemap(\"map:\".concat(t),\"data/area\".concat(t,\".json\"),null,Phaser.Tilemap.TILED_JSON)})),this.game.load.image(\"title\",\"images/title.png\"),this.game.load.image(\"title:empty\",\"images/title_empty.png\"),this.game.load.image(\"princess\",\"images/princess.png\"),this.game.load.image(\"background\",\"images/background.png\"),this.game.load.image(\"tileset\",\"images/tileset.png\"),this.game.load.image(\"hud:logger\",\"images/hud.png\"),this.game.load.image(\"hud:status\",\"images/status.png\"),this.game.load.image(\"throne\",\"images/door.png\"),this.game.load.image(\"crown\",\"images/crown.png\"),this.game.load.image(\"robe\",\"images/robe.png\"),this.game.load.spritesheet(\"chest\",\"images/chest.png\",48,48),this.game.load.spritesheet(\"scepter\",\"images/scepter.png\",9,27),this.game.load.spritesheet(\"chara\",\"images/chara.png\",48,48),this.game.load.spritesheet(\"slime\",\"images/slime.png\",48,48),this.game.load.audio(\"sfx:walk\",\"audio/walk.wav\"),this.game.load.audio(\"sfx:hit\",\"audio/hit.wav\"),this.game.load.audio(\"sfx:chest\",\"audio/chest.wav\"),this.game.load.audio(\"sfx:gameover\",\"audio/death.wav\"),this.game.load.audio(\"bgm:main\",[\"audio/princess.mp3\",\"audio/princess.ogg\"])},create:function(){this.game.state.start(\"title\",!0,!1,{})}},n={init:function(e){this.data=e},create:function(){var e=this;this.keys=this.game.input.keyboard.addKeys({space:Phaser.KeyCode.SPACEBAR});var t=\"Rogue Princess\";this.data.isVictory&&(t=\"Crowned!\"),this.data.isGameOver&&(t=\"Game Over\"),this.game.add.image(0,0,this.data.isVictory||this.data.isGameOver?\"title:empty\":\"title\");var s=this.game.add.text(this.game.width/2,this.game.height/2+48,\"Press <SPACEBAR> to start\",{font:\"28pt Patrick Hand\",fill:\"#fff\"});s.anchor.setTo(.5),s.setShadow(1,1,\"#53034b\",0);var o=this.game.add.text(this.game.width/2,this.game.height/2-72,t,{font:\"72pt Patrick Hand\",fill:\"#fff\"});(o.anchor.setTo(.5),o.setShadow(4,4,\"#53034b\",0),this.data.isVictory)&&(this.game.add.image(this.game.width/2,this.game.height/2,\"princess\").anchor.setTo(.5),s.y+=200,o.y-=128);this.game.add.tween(s.scale).to({x:1.25,y:1.25},1e3,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0),this.keys.space.onUp.addOnce((function(){e.game.state.start(\"play\",!0,!1,{mapKey:\"map:00\",character:{col:7,row:2,wearing:[]},isFirstTime:!0,pickedUp:[]})}))}};function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function i(e,t){return!t||\"object\"!==r(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e,s,o,a){var n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=i(this,l(t).call(this,e))).position.setTo(s,o),n.add(n.game.make.image(0,0,\"hud:status\")),n.lifebar=new LifeBar(n.game,14,10,a.health),n.add(n.lifebar);var r=n.game.make.text(n.width-14,10,\"MOVE: ←↑↓→ WAIT: space\",{fill:\"#fff\",font:\"20pt Patrick Hand\"});return r.anchor.set(1,0),n.add(r),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,Phaser.Group),t}();function c(e){return(c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function m(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return!t||\"object\"!==c(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=4,f={font:\"20pt Patrick Hand\",fill:\"#ce186a\"},y=30,k=function(e){function t(e,s,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(a=d(this,p(t).call(this,e))).position.setTo(s,o),a.add(a.game.make.image(0,0,\"hud:logger\")),a.messages=[],a.messageLabels=[];for(var n=0;n<b;n++){var r=a.game.make.text(10,10+n*y,\"\",f);r.alpha=1-n/b,a.messageLabels.push(r),a.add(r)}return a}var s,o,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,Phaser.Group),s=t,(o=[{key:\"log\",value:function(e){console.log(e),this.messages.unshift(e),this.messages.length>b&&this.messages.pop(),this._updateLabels()}},{key:\"clear\",value:function(){this.messages=[],this._updateLabels()}},{key:\"_updateLabels\",value:function(){var e=this;this.messageLabels.forEach((function(t,s){t.setText(s<e.messages.length?e.messages[s]:\"\")}))}}])&&m(s.prototype,o),a&&m(s,a),t}(),P=s(3);var v={init:function(e){this.initialState=e},create:function(){var e=this;this.keys=this.game.input.keyboard.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,left:Phaser.KeyCode.LEFT,right:Phaser.KeyCode.RIGHT,wait:Phaser.KeyCode.SPACEBAR});var t=function(t){e.keys[t].onDown.add((function(){this.isTurnReady&&this._moveCharacter(t)}),e)};for(var s in this.keys)t(s);this.sfx={walk:this.game.add.audio(\"sfx:walk\"),hit:this.game.add.audio(\"sfx:hit\"),chest:this.game.add.audio(\"sfx:chest\"),gameover:this.game.add.audio(\"sfx:gameover\")},this.initialState.isFirstTime&&(this.song=this.game.add.audio(\"bgm:main\"),this.song.volume=.5,this.song.isDecoded&&!this.song.isPlaying?this.song.loopFull():this.song.onDecoded.addOnce((function(){this.song.loopFull()}),this)),this.map=new P.GameMap(this.game,this.initialState.mapKey),this.items=this.game.add.group(),this.map.spawnItems(this.items,{open:this.sfx.chest},this.initialState.pickedUp),this.enemies=this.game.add.group(),this.map.spawnEnemies(this.enemies,{hit:this.sfx.hit}),this.chara=new Character(this.game,this.initialState.character.col,this.initialState.character.row,{hit:this.sfx.hit},this.initialState.character),this.chara.events.onKilled.addOnce((function(){e.isTurnReady=!1,e.chara.visible=!0,e.sfx.gameover.play();var t=e.game.add.tween(e.chara);t.to({alpha:0,y:e.chara.y-128},1e3,Phaser.Easing.Sinusoidal.In,!0),t.onComplete.addOnce((function(){e.game.tweens.remove(t),e.song.stop(),e.game.state.start(\"title\",!0,!1,{isGameOver:!0})}))})),this.game.add.existing(this.chara),this._checkForExits(this.chara.col,this.chara.row),this.statusBar=new u(this.game,0,this.game.world.height-192,{health:this.chara.health}),this.game.add.existing(this.statusBar),this.lifebar=this.statusBar.lifebar,this.logger=new k(this.game,0,this.game.world.height-144),this.game.add.existing(this.logger),this.initialState.isFirstTime&&(this.logger.log(\"Your adventure begins!\"),this.logger.log(\"Find your regalia and go to the throne room.\")),this.isTurnReady=!0,this.pickedUp=this.initialState.pickedUp||[],this.chara.events.onHit.add((function(){e.lifebar.setValue(e.chara.health)}))},_nextTurn:function(){var e=this,t={chara:this.chara,map:this.map,enemies:this.enemies,items:this.items},s=[];this.enemies.forEach((function(o){s.push(o.act(t,e.logger))})),Promise.all(s).then((function(){e.isTurnReady=!0})).catch((function(e){console.log(\"something went wrong\",e)}))},_moveCharacter:function(e){var t=this;this.isTurnReady=!1;var s={left:-1,right:1}[e]||0,o={up:-1,down:1}[e]||0,a=this.chara.col+s,n=this.chara.row+o,r=this._getObjectAt(a,n);r&&r.isEnemy?this.chara.attack(r,{cols:s,rows:o},this.logger).then((function(){t._nextTurn()})):r&&r.isChest?r.open().then((function(e){t.logger.log(\"You found: \".concat(e.content)),t.chara.canWear(e.content)&&(t.logger.log(\"You are now wearing: \".concat(e.content)),t.chara.wear(e.content)),t.pickedUp.push(e.id),t._nextTurn()})):r&&r.isThrone?(this.chara.hasFullRegalia()?(r.kill(),this.logger.log(\"Finally! Your kingdom awaits!\")):this.logger.log(\"You need to pickup your full regalia first.\"),this._nextTurn()):this.map.canMoveCharacter(a,n)&&!r?(this.sfx.walk.play(),this._checkForExits(a,n),this.chara.move(a,n),this._nextTurn()):this.isTurnReady=!0},_checkForExits:function(e,t){var s=this;e<0||t<0||e>=Map.COLS||t>=Map.ROWS?this.exit.isVictory?(this.game.state.start(\"title\",!0,!1,{isVictory:!0}),this.song&&this.song.stop()):this.game.state.restart(!0,!1,{mapKey:\"map:\".concat(this.exit.to),character:{col:this.exit.col,row:this.exit.row,health:this.chara.health,wearing:Object.keys(this.chara.wearing).filter((function(e){return s.chara.isWearing(e)}))},pickedUp:this.pickedUp}):this.exit=this.map.getExit(e,t)},_getObjectAt:function(e,t){return function(e,t,s){var o=null;return s.enemies.forEachAlive((function(s){s.col===e&&s.row===t&&(o=s)})),s.items.forEachAlive((function(s){s.col===e&&s.row===t&&(o=s)})),o}(e,t,{enemies:this.enemies,items:this.items})}},j={type:Phaser.AUTO,width:768,height:768,parent:\"game\",scene:[{key:\"boot\"}]};window.addEventListener(\"load\",(function(){var e;(e=new Phaser.Game(j)).scene.add(\"boot\",o),e.scene.add(\"preloader\",a),e.scene.add(\"title\",n),e.scene.add(\"play\",v),e.scene.start(\"boot\")}))}});","extractedComments":[]}